requires db

import { RequestContext } from "../../domain"
import Auth from "../components/auth"
import Create from "../components/create"
import Notes from "../components/notes"

fn render_shell(ctx: RequestContext) -> Html:
  return div({"id": "app-shell"}):
    main({"class": "page"}):
      header({"class": "page__header"}):
        h1({"class": "page__title"}):
          "Notes"
        p({"class": "page__subtitle"}):
          "HTMX and HTML DSL reference service."
      Auth.render_session_section(ctx)
      Create.render_create_section(ctx)
      hr(class="separator")
      Notes.render_private_notes_section(ctx)
      Notes.render_public_section(ctx)

fn render_page(ctx: RequestContext) -> Html:
  let css = asset("assets/css/style.css")
  return html():
    head():
      meta({"charset": "UTF-8"})
      meta({"name": "viewport", "content": "width=device-width, initial-scale=1.0"})
      title():
        "Reference Service"
      script({"src": "/assets/lib/htmx_1.9.10.min.js"})
      script({"src": "/assets/lib/htmx_1.9.10_json-enc.js"})
      link({"rel": "stylesheet", "href": css})
    body():
      render_shell(ctx)
